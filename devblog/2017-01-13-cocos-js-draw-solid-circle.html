<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>How to draw a solid circle with Cocos2d-JS | Nonostante Games</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Cocos2d-js doesn’t provide a single function to draw a solid circle. You have to use a combination of primitive calls to obtain one.Here’s a little trick to draw a circle and fill it. It’s fast and ve"><meta name="keywords" content="snippets,cocosjs"><meta property="og:type" content="article"><meta property="og:title" content="How to draw a solid circle with Cocos2d-JS"><meta property="og:url" content="https:&#x2F;&#x2F;www.nonostante.io&#x2F;devblog&#x2F;2017-01-13-cocos-js-draw-solid-circle.html"><meta property="og:site_name" content="Nonostante Games"><meta property="og:description" content="Cocos2d-js doesn’t provide a single function to draw a solid circle. You have to use a combination of primitive calls to obtain one.Here’s a little trick to draw a circle and fill it. It’s fast and ve"><meta property="og:locale" content="en_us"><meta property="og:image" content="https:&#x2F;&#x2F;www.nonostante.io&#x2F;imgs&#x2F;p&#x2F;cocos-js.png"><meta property="og:updated_time" content="2019-12-06T23:27:34.716Z"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https:&#x2F;&#x2F;www.nonostante.io&#x2F;imgs&#x2F;p&#x2F;cocos-js.png"><meta name="twitter:creator" content="@nonostantegames"><meta name="twitter:site" content="@nonostantegames"><link rel="publisher" href="https://plus.google.com/105745368463888977082"><meta property="fb:app_id" content="1191979897592234"><link rel="alternate" href="/atom.xml" title="Nonostante Games" type="application/atom+xml"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.nonostante.io/devblog/2017-01-13-cocos-js-draw-solid-circle.html"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 4.0.0"></head><body><div id="container"><div id="wrap"><aside id="menubar"><div id="logo"><a href="/"></a></div><nav id="nav"><a href="/" class="nav-link">Home</a> <a href="/news" class="nav-link">News</a> <a href="/devblog" class="nav-link">DevBlog</a> <a href="/about.html" class="nav-link">About</a></nav></aside><section id="main"><article id="post-cocos-js-draw-solid-circle" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-topHighlight"><a class="game-badge-link" href="/games/klac"><div class="game-badge"><img class="game-icon" src="/imgs/klac/game-ico.png" alt="KLAC logo" title="KLAC logo"> <span class="game-title">KLAC</span> <span class="game-subtitle">Word puzzle</span> <span class="game-text">Available for</span> <span class="game-stores"><i class="store-ios"></i> <i class="store-android"></i> <i class="store-windows"></i> <i class="store-amazon"></i> <i class="store-macos"></i> <i class="store-steam"></i> <i class="store-itchio"></i></span></div></a></div><div class="article-inner"><div class="article-meta"><a href="/devblog/2017-01-13-cocos-js-draw-solid-circle.html" class="article-date"><time datetime="2017-01-13T15:01:00.000Z" itemprop="datePublished">13 Jan 2017</time></a><div class="article-header-social"><div class="article-share-link-inline"><span class="item item-s"><a class="r-s-b__link" href="https://facebook.com//sharer/sharer.php?u=https%3A%2F%2Fwww.nonostante.io%2Fdevblog%2F2017-01-13-cocos-js-draw-solid-circle.html" target="_blank" aria-label="Share on Facebook"><div class="r-s-b r-s-b--facebook r-s-b--large"><div aria-hidden="true" class="r-s-b__icon r-s-b__icon--solid"><svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="M18.768,7.465H14.5V5.56c0-0.896,0.594-1.105,1.012-1.105s2.988,0,2.988,0V0.513L14.171,0.5C10.244,0.5,9.5,3.438,9.5,5.32 v2.145h-3v4h3c0,5.212,0,12,0,12h5c0,0,0-6.85,0-12h3.851L18.768,7.465z"/></g></svg></div></div></a><span class="item-tw"><a class="r-s-b__link" href="https://twitter.com//intent/tweet?text=Check%20out%20How%20to%20draw%20a%20solid%20circle%20with%20Cocos2d-JS&url=https%3A%2F%2Fwww.nonostante.io%2Fdevblog%2F2017-01-13-cocos-js-draw-solid-circle.html&via=nonostantegames" target="_blank" aria-label="Follow on Twitter"><div class="r-s-b r-s-b--twitter r-s-b--large"><div aria-hidden="true" class="r-s-b__icon r-s-b__icon--solid"><svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="M23.444,4.834c-0.814,0.363-1.5,0.375-2.228,0.016c0.938-0.562,0.981-0.957,1.32-2.019c-0.878,0.521-1.851,0.9-2.886,1.104 C18.823,3.053,17.642,2.5,16.335,2.5c-2.51,0-4.544,2.036-4.544,4.544c0,0.356,0.04,0.703,0.117,1.036 C8.132,7.891,4.783,6.082,2.542,3.332C2.151,4.003,1.927,4.784,1.927,5.617c0,1.577,0.803,2.967,2.021,3.782 C3.203,9.375,2.503,9.171,1.891,8.831C1.89,8.85,1.89,8.868,1.89,8.888c0,2.202,1.566,4.038,3.646,4.456 c-0.666,0.181-1.368,0.209-2.053,0.079c0.579,1.804,2.257,3.118,4.245,3.155C5.783,18.102,3.372,18.737,1,18.459 C3.012,19.748,5.399,20.5,7.966,20.5c8.358,0,12.928-6.924,12.928-12.929c0-0.198-0.003-0.393-0.012-0.588 C21.769,6.343,22.835,5.746,23.444,4.834z"/></g></svg></div></div></a></span></span><span class="item item-l" style="padding-right:6px">Share</span></div><a href="https://www.nonostante.io/devblog/2017-01-13-cocos-js-draw-solid-circle.html#disqus_thread" class="article-comment-link">Comments</a></div></div><header class="article-header"><h1 class="article-title" itemprop="name">How to draw a solid circle with Cocos2d-JS</h1><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocosjs/" rel="tag">cocosjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snippets/" rel="tag">snippets</a></li></ul></header><div class="article-entry" itemprop="articleBody"><p>Cocos2d-js doesn’t provide a single function to draw a solid circle. You have to use a combination of primitive calls to obtain one.</p><p>Here’s a little trick to draw a circle and fill it. It’s fast and very effective as it doesn’t add any draw calls. It just exploits some not-exposed internal members of the canvas rendering wrapper.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> node = <span class="keyword">new</span> cc.DrawNode();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">node.drawCircle(center, radius, ...other params);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//workaround to fill the circle</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lastElement = node._buffer[node._buffer.length - <span class="number">1</span>];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">lastElement.isFill = <span class="literal">true</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">lastElement.fillColor = cc.color.WHITE; <span class="comment">// the fill color</span></span></pre></td></tr></table></figure><p>If you’re in the need to use this function often, thanks to javascript prototype feature, you can enrich the <code>cc.DrawNodeCanvas.prototype</code> with this operation.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment">* @param &#123;cc.point&#125; center - x and y coord of the circle center</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">* @param &#123;number&#125; radius - circle radius length    </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">* @param &#123;cc.color&#125; color - circle fill color</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment">* @param &#123;cc.color&#125; [borderColor] - Optional circle border color.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">* @param &#123;number&#125; [borderWidth] - Optional circle border width.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">* @param &#123;number&#125; [segments] - Optional circle segments, aka definition. (default 24).    </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="comment">*/</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">cc.DrawNodeCanvas.prototype.drawSolidCircle = <span class="function"><span class="keyword">function</span> (<span class="params">center, radius, color, borderColor, borderWidth, segments</span>) </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">this</span>.drawCircle(center, radius, <span class="number">0</span>, segments || <span class="number">24</span>, <span class="literal">false</span>, borderWidth || <span class="number">0</span>, borderColor || color);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">//set the fill mode and color</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> lastElement = <span class="keyword">this</span>._buffer[<span class="keyword">this</span>._buffer.length - <span class="number">1</span>];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    lastElement.isFill = <span class="literal">true</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    lastElement.fillColor = color;     </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><p>Put the code right after the cocos-js script import and you can call <code>drawSolidCircle</code> function in your own game code as it was part of the framework.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> node = <span class="keyword">new</span> cc.DrawNode();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">node.drawSolidCircle(center, radius, color);</span></pre></td></tr></table></figure><p>Hope this trick make your life easier.<br>Keep coding.</p><p><strong>Discaimer</strong><br>As stated this snippet works only in canvas mode. For WebGL you should use standard cocos-js API.</p></div><footer class="article-footer"><a data-url="https://www.nonostante.io/devblog/2017-01-13-cocos-js-draw-solid-circle.html" data-id="ck3v0j8lk001pp0sp3evj4f55" class="article-share-link">Share</a> <a href="https://www.nonostante.io/devblog/2017-01-13-cocos-js-draw-solid-circle.html#disqus_thread" class="article-comment-link">Comments</a><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocosjs/" rel="tag">cocosjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snippets/" rel="tag">snippets</a></li></ul></footer></div><nav id="article-nav"><a href="/news/2017-01-16-aedo-episodes-update-2.html" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">Aedo Episodes - Update #2 (big)</div></a><a href="/news/2016-12-01-aedo-episodes-update-1.html" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">Aedo Episodes - Update #1 (minor)</div></a></nav></article><section id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></section><aside id="sidebar"><div class="widget-wrap game-latest"><div class="widget-title">Our latest production</div><div class="widget"><a class="game-badge-link" href="/games/klac"><div class="game-badge"><img class="game-icon" src="/imgs/klac/game-ico.png" alt="KLAC logo" title="KLAC logo"> <span class="game-title">KLAC</span> <span class="game-subtitle">Word puzzle</span> <span class="game-text">Available for</span> <span class="game-stores"><i class="store-ios"></i> <i class="store-android"></i> <i class="store-windows"></i> <i class="store-amazon"></i> <i class="store-macos"></i> <i class="store-steam"></i> <i class="store-itchio"></i></span></div></a></div></div><div class="widget-wrap"><h3 class="widget-title">Recents</h3><div class="widget"><ul><li><a href="/news/2019-03-27-klac-update-2.html">KLAC - Update #2 - New levels, bosses and MacOS support</a></li><li><a href="/news/2018-11-27-runa-announcement.html">RUNA: Arrange and spread the light - a gorgeous puzzle game</a></li><li><a href="/news/2018-09-30-klac-announcement.html">KLAC: Snap, Split and Stick - a spatial word puzzle game</a></li><li><a href="/news/2018-07-16-ermo-iphone-wallpapers.html">ERMO - iPhone Wallpapers to celebrate the new update</a></li><li><a href="/news/2018-07-06-ermo-biok-mod.html">ERMO - Update #3 - BIOK Mod</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Tags</h3><div class="widget"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/aedo-episodes/" rel="tag">Aedo Episodes</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/biok/" rel="tag">BIOK</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ermo/" rel="tag">ERMO</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/klac/" rel="tag">KLAC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/runa/" rel="tag">RUNA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uwp/" rel="tag">UWP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wp/" rel="tag">WP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xbox/" rel="tag">Xbox</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocosjs/" rel="tag">cocosjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cordova/" rel="tag">cordova</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/minigame/" rel="tag">minigame</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snippets/" rel="tag">snippets</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag">web</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Social</h3><div class="widget"><a class="r-s-b__link" href="http://www.facebook.com//nonostantegames" target="_blank" aria-label="Like the Facebook page"><div class="r-s-b r-s-b--facebook r-s-b--large"><div aria-hidden="true" class="r-s-b__icon r-s-b__icon--solid"><svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="M18.768,7.465H14.5V5.56c0-0.896,0.594-1.105,1.012-1.105s2.988,0,2.988,0V0.513L14.171,0.5C10.244,0.5,9.5,3.438,9.5,5.32 v2.145h-3v4h3c0,5.212,0,12,0,12h5c0,0,0-6.85,0-12h3.851L18.768,7.465z"/></g></svg></div><span class="r-s-b-label">Like</span></div></a><a class="r-s-b__link" href="https://twitter.com//intent/follow?screen_name=nonostantegames" target="_blank" aria-label="Follow on Twitter"><div class="r-s-b r-s-b--twitter r-s-b--large"><div aria-hidden="true" class="r-s-b__icon r-s-b__icon--solid"><svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="M23.444,4.834c-0.814,0.363-1.5,0.375-2.228,0.016c0.938-0.562,0.981-0.957,1.32-2.019c-0.878,0.521-1.851,0.9-2.886,1.104 C18.823,3.053,17.642,2.5,16.335,2.5c-2.51,0-4.544,2.036-4.544,4.544c0,0.356,0.04,0.703,0.117,1.036 C8.132,7.891,4.783,6.082,2.542,3.332C2.151,4.003,1.927,4.784,1.927,5.617c0,1.577,0.803,2.967,2.021,3.782 C3.203,9.375,2.503,9.171,1.891,8.831C1.89,8.85,1.89,8.868,1.89,8.888c0,2.202,1.566,4.038,3.646,4.456 c-0.666,0.181-1.368,0.209-2.053,0.079c0.579,1.804,2.257,3.118,4.245,3.155C5.783,18.102,3.372,18.737,1,18.459 C3.012,19.748,5.399,20.5,7.966,20.5c8.358,0,12.928-6.924,12.928-12.929c0-0.198-0.003-0.393-0.012-0.588 C21.769,6.343,22.835,5.746,23.444,4.834z"/></g></svg></div><span class="r-s-b-label">Follow</span></div></a></div></div></aside><footer id="footer"><div id="footer-info">&copy; 2019 Nonostante | <a href="/about.html">About</a> | <a href="/privacy.html">Privacy policy</a></div><div id="privacy-accept">This website uses cookies to improve your experience <button id="btn-policy-accept">Accept</button></div></footer></div><script>var disqus_shortname="nonostantegames",disqus_url="https://www.nonostante.io/devblog/2017-01-13-cocos-js-draw-solid-circle.html";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65328289-2","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com//analytics.js"></script><script src="/js/script.js"></script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet"></div></body></html>